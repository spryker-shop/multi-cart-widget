{% extends model('component') %}

{% define config = {
    name: 'mini-cart-detail',
    tag: 'div'
} %}

{% define data = {
    cart: required,
    itemDisplayLimit: 2
} %}

{% set itemCount = data.cart.items | length %}

{% block body %}
    <div class="text-small text-left">
        <div>
            <input type="radio" name="isDefault" value="{{ data.cart.name }}"
                {% if data.cart.isDefault %}
                    checked
                {% else %}
                    onClick="location.href='{{ path('multi-cart/set-default', {idQuote: data.cart.idQuote}) }}';"
                {% endif %}
            />

            {% if itemCount > 0 %}
                <span class=" float-right">
                   {{ data.cart.totals.subTotal | money(true, data.cart.currency.code) }}<br>
                </span>
            {% endif %}

            <a href="{{ path('multi-cart/set-default', {idQuote: data.cart.idQuote}) }}">
                <strong>{{ data.cart.name }}</strong>
            </a>
            {% if data.cart.isDefault %}
                ({{ 'multi_cart_widget.cart.default' | trans }})
            {% endif %}
        </div>

        <div>
            {% if itemCount > 0 %}
                <span class=" float-right">
                    {% if widgetExists('ProductBundleItemCounterWidgetPlugin') %}
                        {{ widget('ProductBundleItemCounterWidgetPlugin', data.cart) }}
                    {% else %}
                        {% set label = (itemCount == 1) ? 'multi_cart_widget.cart.item' : 'multi_cart_widget.cart.items' %}

                        {% block body %}
                            {{ itemCount }} {{ label | trans }}
                        {% endblock %}
                    {% endif %}
                </span>
            {% endif %}

            {% if widgetExists('SharedCartPermissionGroupWidgetPlugin') %}
                {{ widget('SharedCartPermissionGroupWidgetPlugin', data.cart) }}
            {% endif %}
        </div>
    </div>
{% endblock %}
