{% extends model('component') %}

{% define config = {
    name: 'add-to-cart-seletor',
    tag: 'span'
} %}

{% define data = {
    carts: required,
    isButtonDisabled: false
} %}

{% set options = [{ label: data.cart.name, value: data.cart.idQuote}] %}
{% set attributes = {
    name: 'id_quote',
    onchange: 'this.form.submit(); this.disabled="disabled"; return false;',
} %}
{% for cart in data.carts %}
    {% set options = options | merge([{
        label: cart.name,
        value: cart.idQuote
    }]) %}
{% endfor %}
{% if data.isButtonDisabled %}
    {% set attributes = attributes | merge({
        disabled: true
    }) %}
{% endif %}
{% set options = options | merge([{
    label: 'multi_cart_widget.cart.add' | trans,
    value: 0
}]) %}
{% block body %}
    {% include atom('select') with {
        modifiers: ['expand'],
        attributes: attributes,
        data: {
            options: options
        }
    } only %}
{% endblock %}
